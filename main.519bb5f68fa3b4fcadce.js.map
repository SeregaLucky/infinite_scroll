{"version":3,"sources":["webpack:///./index.js","webpack:///./templates/item-photo.hbs"],"names":["refs","form","document","querySelector","gallery","modal","imgInModal","closeModal","classList","remove","window","removeEventListener","clickEscape","src","e","code","addEventListener","preventDefault","input","currentTarget","elements","search","innerHTML","galleryScroll","InfiniteScroll","responseType","history","path","breakCors","value","this","pageIndex","on","response","data","JSON","parse","markup","listItemsTemplate","hits","proxyEl","createElement","allItems","querySelectorAll","appendItems","loadNextPage","target","nodeName","srcBigPhoto","closest","dataset","source","add","Handlebars","__webpack_require__","module","exports","template","1","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","name","hash","largeImageURL","likes","views","comments","downloads","compiler","main","stack1","each","fn","program","inverse","noop","useData"],"mappings":"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","file":"main.519bb5f68fa3b4fcadce.js","sourcesContent":["import './styles.css';\nimport InfiniteScroll from 'infinite-scroll';\nimport listItemsTemplate from './templates/item-photo.hbs';\n// import './js/modal';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  gallery: document.querySelector('#gallery'),\n  modal: document.querySelector('#modal'),\n  imgInModal: modal.querySelector('img'),\n};\n\nrefs.form.addEventListener('submit', handleFindNewPhotos);\nrefs.gallery.addEventListener('click', handleClick);\nrefs.modal.addEventListener('click', clickOverlayCloseModal);\n\nfunction handleFindNewPhotos(e) {\n  e.preventDefault();\n\n  const input = e.currentTarget.elements.search;\n\n  refs.gallery.innerHTML = '';\n\n  const breakCors = 'https://cors-anywhere.herokuapp.com/';\n  const baseUrl = 'https://pixabay.com/api/';\n  const baseText = '?image_type=photo&orientation=horizontal&q=';\n  const keyApi = '&key=12935223-ebb6e80bcfb15004a250fd4eb';\n\n  const galleryScroll = new InfiniteScroll(refs.gallery, {\n    responseType: 'text',\n    history: false,\n    path: function() {\n      return `${breakCors +\n        baseUrl +\n        baseText +\n        input.value}&per_page=12&page=${this.pageIndex + keyApi}`;\n    },\n  });\n\n  galleryScroll.pageIndex = 1;\n\n  galleryScroll.on('load', response => {\n    const data = JSON.parse(response);\n    const markup = listItemsTemplate(data.hits);\n    const proxyEl = document.createElement('div');\n\n    proxyEl.innerHTML = markup;\n\n    const allItems = proxyEl.querySelectorAll('.gallery-item');\n\n    galleryScroll.appendItems(allItems);\n  });\n\n  galleryScroll.loadNextPage();\n}\n\n/*\n * MODAL\n */\n\nfunction handleClick(e) {\n  if (e.target.nodeName !== 'BUTTON' && e.target.nodeName !== 'I') return;\n\n  const parent = e.target.closest('.gallery-item');\n  const imgInItem = parent.querySelector('img');\n  const srcBigPhoto = imgInItem.dataset.source;\n\n  refs.imgInModal.src = srcBigPhoto;\n\n  openModal();\n}\n\nfunction openModal() {\n  refs.modal.classList.add('is-visible');\n  window.addEventListener('keydown', clickEscape);\n}\n\nfunction clickOverlayCloseModal(e) {\n  if (e.target !== e.currentTarget) return;\n\n  closeModal();\n}\n\nfunction closeModal() {\n  refs.modal.classList.remove('is-visible');\n  window.removeEventListener('keydown', clickEscape);\n  refs.imgInModal.src = '';\n}\n\nfunction clickEscape(e) {\n  if (e.code !== 'Escape') return;\n\n  closeModal();\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"gallery-item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n\\r\\n        <!-- Кнопка для открытия модалки с большим изображением, появляется при наведении -->\\r\\n        <button type=\\\"button\\\" class=\\\"fullscreen-button\\\" data-action=\\\"modal\\\">\\r\\n            <i class=\\\"material-icons\\\">zoom_out_map</i>\\r\\n        </button>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}